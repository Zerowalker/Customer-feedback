var CustomerFeedback={};CustomerFeedback.Form=CustomerFeedback.Form||{},CustomerFeedback.Form=function(e){function t(){this.handleEvents()}return t.prototype.handleEvents=function(){e('[data-action="customer-feedback-submit-response"]').on("click",function(t){t.preventDefault(),$target=e(t.target).parents(".customer-feedback-container"),e(t.target).html('<i class="spinner spinner-dark"></i>');var a=$target.find('[name="customer-feedback-post-id"]').val(),n=e(t.target).val();this.submitInitialResponse($target,a,n)}.bind(this)),e('[data-action="customer-feedback-submit-comment"]').on("click",function(t){t.preventDefault(),e(t.target).html('<i class="spinner spinner-dark"></i>'),$target=e(t.target).parents(".customer-feedback-container"),$target.find('[name="customer-feedback-comment-text"]').removeClass("invalid");var a="comment",n=$target.find('[name="customer-feedback-answer-id"]').val(),s=$target.find('[name="customer-feedback-post-id"]').val(),i=$target.find('[name="customer-feedback-comment-text"]').val(),o=$target.find('[name="customer-feedback-comment-email"]').val();return 0===i.length?($target.find('[name="customer-feedback-comment-text"]').addClass("invalid"),$target.find('[name="customer-feedback-comment-text"]').after('<div class="clearfix"></div><div style="margin-top: 5px;" class="notice notice-sm danger">You need to write a comment before posting it.</div>'),!1):void this.submitComment($target,n,s,a,i,o)}.bind(this))},t.prototype.submitComment=function(t,a,n,s,i,o){var r={action:"submit_comment",postid:n,comment:i,answerid:a,commenttype:s,email:o},m=t;e.post(ajaxurl,r,function(e){"true"==e&&(m.find(".customer-feedback-comment").remove(),m.find(".customer-feedback-thanks").show())})},t.prototype.submitInitialResponse=function(t,a,n){var s=t,i={action:"submit_response",postid:a,answer:n};e.post(ajaxurl,i,function(e){"yes"==i.answer&&!isNaN(parseFloat(e))&&isFinite(e)&&(s.find('[name="customer-feedback-post-id"]').after('<input type="hidden" name="customer-feedback-answer-id" value="'+e+'">'),s.find(".customer-feedback-answers").remove(),s.find(".customer-feedback-comment").show().find(".feedback-label-yes").show()),"no"==i.answer&&!isNaN(parseFloat(e))&&isFinite(e)&&(s.find('[name="customer-feedback-post-id"]').after('<input type="hidden" name="customer-feedback-answer-id" value="'+e+'">'),s.find(".customer-feedback-answers").remove(),s.find(".customer-feedback-comment").show().find(".feedback-label-no").show())})},new t}(jQuery);