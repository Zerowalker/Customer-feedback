var CustomerFeedbackChat={};CustomerFeedbackChat.Form=CustomerFeedbackChat.Form||{},CustomerFeedbackChat.Form=function(e){function t(){this.handleEvents()}return t.prototype.handleEvents=function(){e('[data-action="customer-feedback-chat-submit-response"]').on("click",function(t){t.preventDefault(),e(t.target).html('<i class="fa fa-spinner fa-spin"></i>');var a=e("#customer-feedback-chat-post-id").val(),c=e(t.target).val();this.submitInitialResponse(a,c)}.bind(this)),e('[data-action="customer-feedback-chat-submit-comment"]').on("click",function(t){t.preventDefault(),e("#customer-feedback-chat-comment-text").removeClass("invalid");var a="comment",c=e("#customer-feedback-chat-answer-id").val(),s=e("#customer-feedback-chat-post-id").val(),o=e("#customer-feedback-chat-comment-text").val();return 0===o.length?(e("#customer-feedback-chat-comment-text").addClass("invalid"),e("#customer-feedback-chat-comment-text").after('<div class="clearfix"></div><div style="margin-top: 5px;" class="notice notice-sm danger">You need to write a comment before posting it.</div>'),!1):void this.submitComment(c,s,a,o)}.bind(this))},t.prototype.submitComment=function(t,a,c,s){var o={action:"submit_comment",postid:a,comment:s,answerid:t,commenttype:c};e.post(ajaxurl,o,function(t){"true"==t&&(e("#customer-feedback-chat-comment").remove(),e("#customer-feedback-chat-thanks").show())})},t.prototype.submitInitialResponse=function(t,a){var c={action:"submit_response",postid:t,answer:a};e.post(ajaxurl,c,function(t){"yes"==c.answer&&!isNaN(parseFloat(t))&&isFinite(t)&&(e("#customer-feedback-chat-answers").hide(),e("#customer-feedback-chat-thanks").show()),"no"==c.answer&&!isNaN(parseFloat(t))&&isFinite(t)&&(e("#customer-feedback-chat-post-id").after('<input type="hidden" id="customer-feedback-chat-answer-id" value="'+t+'">'),e("#customer-feedback-chat-answers").remove(),e("#customer-feedback-chat-comment").show())})},new t}(jQuery);